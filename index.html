
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ofxDarkKnight documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[&quot;c++&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="c++">c++</a>
        </div>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting started">Getting started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#download-openframeworks" class="toc-h2 toc-link" data-title="Download openFrameworks">Download openFrameworks</a>
                  </li>
                  <li>
                    <a href="#install-ofxdarkknight" class="toc-h2 toc-link" data-title="Install ofxDarkKnight">Install ofxDarkKnight</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#running-the-examples" class="toc-h1 toc-link" data-title="Running the examples">Running the examples</a>
          </li>
          <li>
            <a href="#create-a-new-project" class="toc-h1 toc-link" data-title="Create a new project">Create a new project</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#including-the-addon" class="toc-h2 toc-link" data-title="Including the addon">Including the addon</a>
                  </li>
                  <li>
                    <a href="#adding-existing-modules" class="toc-h2 toc-link" data-title="Adding existing modules">Adding existing modules</a>
                  </li>
                  <li>
                    <a href="#config-the-manager" class="toc-h2 toc-link" data-title="Config the manager">Config the manager</a>
                  </li>
                  <li>
                    <a href="#setup-the-screen-output-module" class="toc-h2 toc-link" data-title="Setup the SCREEN OUTPUT module">Setup the SCREEN OUTPUT module</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#create-new-modules" class="toc-h1 toc-link" data-title="Create new modules">Create new modules</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-module-class" class="toc-h2 toc-link" data-title="The Module class">The Module class</a>
                  </li>
                  <li>
                    <a href="#simple-drawer-module" class="toc-h2 toc-link" data-title="Simple drawer module">Simple drawer module</a>
                  </li>
                  <li>
                    <a href="#add-new-module-to-manager" class="toc-h2 toc-link" data-title="Add new module to manager">Add new module to manager</a>
                  </li>
                  <li>
                    <a href="#collections" class="toc-h2 toc-link" data-title="Collections">Collections</a>
                  </li>
                  <li>
                    <a href="#adding-ellipse-example-to-the-collection" class="toc-h2 toc-link" data-title="Adding Ellipse example to the collection">Adding Ellipse example to the collection</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#credits" class="toc-h1 toc-link" data-title="Credits">Credits</a>
          </li>
          <li>
            <a href="#license" class="toc-h1 toc-link" data-title="License">License</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/luiscript/ofxDarkKnight'>Github repository</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the <a href="https://github.com/luiscript/ofxDarkKnight">ofxDarkKnight</a> documentation page. This docs will provide an essential guide about the Dark Knight platform and  a basic introduction for coding node-based modules for the DK environment.</p>

<p>ofxDarkKnight is an addon for openFrameworks 0.98 that allows you to easily create and integrate your OF sketches into a platform that is designed to perform in real time mostly for VJ&#39;ing and projection mapping projects.</p>
<h1 id='getting-started'>Getting started</h1><h2 id='download-openframeworks'>Download openFrameworks</h2>
<p>ofxDarkKnight it&#39;s built on top of <a href="https://openframeworks.cc/">openframeworks</a> v0.9.8 and it&#39;s only tested on MacOS for now. </p>

<p>Download <a href="https://openframeworks.cc/download/older/">openFrameworks v0.9.8</a> for your development platform. Open an example and run it to make sure that everything is working correctly.</p>

<p>If your having problems running the examples please <a href="https://openframeworks.cc/ofBook/chapters/setup_and_project_structure.html#runningexamples">read this guide</a></p>

<aside class="notice">
Double check that you download the (0.9.8) version
</aside>
<h2 id='install-ofxdarkknight'>Install ofxDarkKnight</h2>
<p>Download and install <a href="https://github.com/luiscript/ofxDarkKnight/">ofxDarkKnight</a> addon into your <code>openframeworks_v0.9.8/addons/</code> directory or install it using git:</p>

<p><code>git clone https://github.com/luiscript/ofxDarkKnight/</code></p>
<h1 id='running-the-examples'>Running the examples</h1>
<ol>
<li><p>Open the <a href="https://github.com/luiscript/ofxDarkKnight/tree/master/example/Alfred">Alfred</a> project under your <code>openframeworks/addons/ofxDarkKnight/example</code> directory.</p></li>
<li><p>Run the project.</p></li>
<li><p>Press <code>CMD+Intro</code> to show/hide the modules list.</p></li>
<li><p>Click on SKETCH POOL module to add it to the stage.</p></li>
<li><p>Repeat the step (3) and click the PREVIEW module.</p></li>
<li><p>Press <code>CMD+M</code> to enter mapping mode.</p></li>
<li><p>Connect the output of the SKETCH POOL module into the input of PREVIEW module by dragging the mouse.</p></li>
<li><p>Select the second item in the sketch pool.</p></li>
<li><p>Play with the module parameters.</p></li>
</ol>
<h1 id='create-a-new-project'>Create a new project</h1>
<p>If you want to start a new project from scratch, follow the next steps:</p>

<ul>
<li><p>Open the OF projectGenerator</p></li>
<li><p>Add ofxDarkKnight addon</p></li>
<li><p>Generate the project</p></li>
<li><p>Copy the <code>ofxDarkKnight/data</code> content into <code>yourNewProject/bin/data</code> directory</p></li>
</ul>
<h2 id='including-the-addon'>Including the addon</h2>
<blockquote>
<p>ofApp.h file:</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "ofxDarkNight.hpp"
#include "ofMain.h"
</span>
<span class="k">class</span> <span class="nc">ofApp</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ofBaseApp</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>

    <span class="kt">void</span> <span class="n">setup</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">update</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">draw</span><span class="p">();</span>

    <span class="n">ofxDarkKnight</span> <span class="n">manager</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<ul>
<li>Add ofxDarkKnight to your code</li>
<li>Create an instance of ofxDarkKnight class and call it <code>manager</code>.</li>
</ul>
<h2 id='adding-existing-modules'>Adding existing modules</h2>
<blockquote>
<p>ofApp.h:</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "ofxDarkNight.hpp"
#include "ofMain.h"
</span>
<span class="c1">// this module draws a preview on the gui
</span><span class="cp">#include "preview.hpp"
</span>
<span class="c1">//this is the basic sketch pool collection
</span><span class="cp">#include "basic.hpp"
</span></code></pre>
<p>This are the modules that you want to use in your project, here you need to include the base DK modules, your custom modules and the third party DK modules.</p>
<h2 id='config-the-manager'>Config the manager</h2>
<blockquote>
<p>ofApp.cpp:</p>
</blockquote>
<pre class="highlight cpp"><code><span class="kt">void</span> <span class="n">ofApp</span><span class="o">::</span><span class="n">setup</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">ofBackground</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">Module</span><span class="o">*&gt;</span> <span class="n">modulesPool</span><span class="p">;</span>
  <span class="n">modulesPool</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">{</span> <span class="s">"PREVIEW"</span><span class="p">,</span> <span class="k">new</span> <span class="n">Preview</span> <span class="p">},</span>
      <span class="p">{</span> <span class="s">"SKETCH POOL"</span><span class="p">,</span> <span class="k">new</span> <span class="n">Basic</span> <span class="p">}</span>
  <span class="p">};</span>
  <span class="n">manager</span><span class="p">.</span><span class="n">setup</span><span class="p">(</span><span class="o">&amp;</span><span class="n">modulesPool</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofApp</span><span class="o">::</span><span class="n">update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofApp</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">manager</span><span class="p">.</span><span class="n">draw</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>The <code>setup</code> function of ofxDarkKnight class is expecting an <code>unordered_map&lt;string, Module*&gt;</code> pointer with a collection of pairs <code>moduleName-module</code> objects of type <code>string-Module*</code>.</p>

<p>Create the data structure and send it to the manager in the <code>setup</code> function of <code>ofApp.cpp</code>.</p>

<p>Then just call <code>manager.update()</code> in the main <code>update()</code>function and <code>manager.draw()</code> in the main <code>draw()</code> function.</p>

<aside class="notice">
You may need to add <code>#include "unordered_map"</code> in your <code>ofApp.h</code> file.
</aside>
<h2 id='setup-the-screen-output-module'>Setup the SCREEN OUTPUT module</h2>
<blockquote>
<p>ofApp.h:</p>
</blockquote>
<pre class="highlight cpp"><code>    <span class="p">...</span>
    <span class="n">ofDarkKnight</span> <span class="n">manager</span><span class="p">;</span>
    <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ofAppBaseWindow</span><span class="o">&gt;</span> <span class="n">mainWindow</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>ofApp.cpp:</p>
</blockquote>
<pre class="highlight cpp"><code><span class="kt">void</span> <span class="n">ofApp</span><span class="o">::</span><span class="n">setup</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//...
</span>    <span class="n">manager</span><span class="p">.</span><span class="n">mainWindow</span> <span class="o">=</span> <span class="n">mainWindow</span><span class="p">;</span>
    <span class="c1">//...
</span><span class="p">}</span>
</code></pre>
<blockquote>
<p>main.cpp:</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "ofMain.h"
#include "ofApp.h"
</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">(</span> <span class="p">){</span>
    <span class="n">CGRect</span> <span class="n">thisMonitorArea</span> <span class="o">=</span> <span class="n">CGDisplayBounds</span><span class="p">(</span><span class="n">CGMainDisplayID</span><span class="p">());</span>
    <span class="kt">int</span> <span class="n">thisWidth</span> <span class="o">=</span> <span class="n">CGRectGetWidth</span><span class="p">(</span><span class="n">thisMonitorArea</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">thisHeight</span> <span class="o">=</span> <span class="n">CGRectGetHeight</span><span class="p">(</span><span class="n">thisMonitorArea</span><span class="p">);</span>

    <span class="n">ofGLFWWindowSettings</span> <span class="n">settings</span><span class="p">;</span>
    <span class="n">settings</span><span class="p">.</span><span class="n">resizable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">settings</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">1920</span><span class="p">;</span>
    <span class="n">settings</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">1080</span><span class="p">;</span>
    <span class="n">settings</span><span class="p">.</span><span class="n">windowMode</span> <span class="o">=</span> <span class="n">OF_WINDOW</span><span class="p">;</span>

    <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ofAppBaseWindow</span><span class="o">&gt;</span> <span class="n">mainWindow</span> <span class="o">=</span> <span class="n">ofCreateWindow</span><span class="p">(</span><span class="n">settings</span><span class="p">);</span>
    <span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ofApp</span><span class="o">&gt;</span> <span class="n">mainApp</span><span class="p">(</span><span class="k">new</span> <span class="n">ofApp</span><span class="p">);</span>

    <span class="n">mainApp</span><span class="o">-&gt;</span><span class="n">mainWindow</span> <span class="o">=</span> <span class="n">mainWindow</span><span class="p">;</span>
    <span class="n">ofRunApp</span><span class="p">(</span><span class="n">mainWindow</span><span class="p">,</span> <span class="n">mainApp</span><span class="p">);</span>
    <span class="n">ofRunMainLoop</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>The SCREEN OUTPUT module requires to share the OpenGL context with the main window. To do that, create a <code>shared_ptr&lt;ofAppBaseWindow&gt;</code> property of the ofApp class.</p>

<p>Add the window to the manager by modifying its <code>mainWindow</code> property.</p>

<p>Modify the <code>main.cpp</code> file to add some custom configuration to the window.</p>
<h1 id='create-new-modules'>Create new modules</h1>
<p>The fun part of ofxDarkKnight begins a soon as you start creating your own modules. The addon provides c++ clases that will help you create new modules with ease. For now you can create only 2 types of modules: Stand alone &amp; Drawer modules. </p>

<p>The <strong>stand alone</strong> modules are designed to interact with your sketches in different ways. For instance you may want to add a MIDI controller to modify parameters or a Syphon server to send your graphics to other app in real time. </p>

<p>The <strong>drawer modules</strong> are designed to draw something on the screen, this could be a video, generative animation, shader or anything that can draw on the screen.</p>
<h2 id='the-module-class'>The Module class</h2>
<blockquote>
<p>Stand alone module header template</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "module.hpp"
</span>
<span class="k">class</span> <span class="nc">ofxDarkNightTemplate</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Module</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">setup</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">update</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">draw</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">addModuleParameters</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">drawMasterInput</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">drawMasterOutput</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">setFbo</span><span class="p">(</span><span class="n">ofFbo</span> <span class="o">*</span><span class="p">);</span>
    <span class="n">ofFbo</span> <span class="o">*</span> <span class="n">getFbo</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">unMount</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>To create a new module follow the steps:</p>

<ol>
<li>Add a new c++ file to your project.</li>
<li>Include <code>module.hpp</code> file (provided with the addon).</li>
<li>Create a new c++ class that inheriths from <code>Module</code> class.</li>
<li>Implement the virtual functions of <code>Module</code> class</li>
</ol>

<p>This are the list of virtual functions that you should implement in your module:</p>

<table><thead>
<tr>
<th>functions</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>void setup()</td>
<td>Runs once at the begining of the sketch.</td>
</tr>
<tr>
<td>void update()</td>
<td>Runs every frame to update data.</td>
</tr>
<tr>
<td>void draw()</td>
<td>Runs every frame to draw something on the screen.</td>
</tr>
<tr>
<td>void addModuleParameters()</td>
<td>Runs once after setup, here you will add all the parameters that your module needs. ofxDarkKnight uses ofxDatGui, to learn how to add paramemeters please read the <a href="https://braitsch.github.io/ofxDatGui/">ofxDatGui docs</a>. Right now only sliders are supported.</td>
</tr>
<tr>
<td>void drawMasterInput()</td>
<td>You should implement this function when your module needs an input in order to work, for example a video FX.</td>
</tr>
<tr>
<td>void drawMasterOutput()</td>
<td>If your module returns something, then you should implement this function.</td>
</tr>
<tr>
<td>void setFbo(ofFbo *)</td>
<td>This function will be called when an external module conects it&#39;s main output with the current module&#39;s input and it will recieve a pointer to an ofFbo that contains the graphics.</td>
</tr>
<tr>
<td>ofFbo getFbo()</td>
<td>This function will be called when you try to connect the current module&#39;s output to an external module&#39;s input. It should return an ofFbo pointer that contains the drawing.</td>
</tr>
<tr>
<td>void unMount()</td>
<td>Runs once when the app closes.</td>
</tr>
</tbody></table>

<aside class="notice">
You don't have to implement all the functions, just use the ones that you need. None function is required, it all depends on your goals.
</aside>
<h2 id='simple-drawer-module'>Simple drawer module</h2>
<blockquote>
<p>Simple Ellipse module ofxDarkKnightEllipse.hpp</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "module.hpp"
</span>
<span class="k">class</span> <span class="nc">ofxDarkKnightEllipse</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Module</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">setup</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">draw</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">addModuleParameters</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">drawMasterOutput</span><span class="p">();</span>
    <span class="n">ofFbo</span> <span class="o">*</span> <span class="n">getFbo</span><span class="p">();</span>

    <span class="k">private</span><span class="o">:</span>
    <span class="n">ofFbo</span> <span class="o">*</span> <span class="n">fbo</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">radius</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fillColorR</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fillColorG</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fillColorB</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Simple Ellipse module ofxDarkKnightEllipse.cpp</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "ofxDarkKnightEllipse.hpp"
</span>
<span class="kt">void</span> <span class="n">ofxDarkKnightEllipse</span><span class="o">::</span><span class="n">setup</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">//allocate the fbo
</span>  <span class="n">fbo</span><span class="o">-&gt;</span><span class="n">allocate</span><span class="p">(</span><span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="n">GL_RGBA</span><span class="p">);</span>
  <span class="n">fbo</span><span class="o">-&gt;</span><span class="n">begin</span><span class="p">();</span>
  <span class="n">ofClear</span><span class="p">();</span>
  <span class="n">fbo</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">();</span>

  <span class="c1">//initialize all your parameters
</span>  <span class="n">radius</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
  <span class="n">fillColorR</span> <span class="o">=</span> <span class="mi">255</span><span class="p">;</span>
  <span class="n">fillColorG</span> <span class="o">=</span> <span class="n">fillColorB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofxDarkKnightEllipse</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">ofFill</span><span class="p">();</span>
  <span class="n">ofSetColor</span><span class="p">(</span><span class="n">fillColorR</span><span class="p">,</span><span class="n">fillColorG</span><span class="p">,</span> <span class="n">fillColorB</span><span class="p">);</span>
  <span class="n">ofDrawEllipse</span><span class="p">(</span><span class="n">ofGetWidth</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">ofGetHeight</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">raduis</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofxDarkKnightEllipse</span><span class="o">::</span><span class="n">addModuleParameters</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"radius"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">radius</span><span class="p">);</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"R"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">fillColorR</span><span class="p">);</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"G"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">fillColorG</span><span class="p">);</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"B"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">fillColorB</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">ofFbo</span> <span class="o">*</span> <span class="n">ofxDarkKnightEllipse</span><span class="o">::</span><span class="n">getFbo</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">fbo</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>Let&#39;s create a simple ellipse module that has 2 main parameters: radius and fillColor. For the radius we will use an integer value and for the fillColor we will use 3 integer values for the RGB components of the color.</p>

<p>We will need to implement the <code>drawMasterOutput()</code> because this module will draw something and will return the drawing in the module&#39;s output.</p>

<p>In this particular case, we will need to allocate an fbo because the drawing is generated from scratch and it do not depends on the module&#39;s input.</p>

<p>Implement the <code>ofFbo * getFbo()</code> to pass it&#39;s drawing to the output.</p>
<h2 id='add-new-module-to-manager'>Add new module to manager</h2>
<blockquote>
<p>Simple Ellipse module ofxDarkKnightEllipse.cpp</p>
</blockquote>
<pre class="highlight cpp"><code>  <span class="p">...</span>
  <span class="n">modulesPool</span> <span class="o">=</span> <span class="p">{</span>
      <span class="p">{</span> <span class="s">"ELLIPSE"</span><span class="p">,</span> <span class="k">new</span> <span class="n">ofxDarkKnightEllipse</span><span class="p">},</span>
      <span class="p">{</span> <span class="s">"PREVIEW"</span><span class="p">,</span> <span class="k">new</span> <span class="n">Preview</span> <span class="p">},</span>
      <span class="p">{</span> <span class="s">"SKETCH POOL"</span><span class="p">,</span> <span class="k">new</span> <span class="n">Basic</span> <span class="p">}</span>
  <span class="p">};</span>
  <span class="p">...</span>
</code></pre>
<p>Now that we created a new module, we need to add it to the manager, please refer to the <a href="#adding-existing-modules">Adding existing modules</a> and follow the instructions. The <code>modulesPool</code> structure should look like the code example.</p>

<p>Try to run the project and if everything is good you should be able to add your brand new Ellipse module and control it&#39;s size and fillColor with the module&#39;s parameters.</p>

<aside class="notice">
Remember to include the module in the main header file <code>#include "ofxDarkKnightEllipse.hpp"</code>
</aside>
<h2 id='collections'>Collections</h2>
<blockquote>
<p>Basic collection example</p>
</blockquote>
<pre class="highlight cpp"><code><span class="k">class</span> <span class="nc">Basic</span> <span class="o">:</span> <span class="k">public</span> <span class="n">MediaPool</span><span class="p">{</span>

<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">setup</span><span class="p">(){</span>
        <span class="n">setCollectionName</span><span class="p">(</span><span class="s">"Basic"</span><span class="p">);</span>

        <span class="n">collection</span> <span class="o">=</span> <span class="p">{</span>
            <span class="p">{</span>
                <span class="s">"TERRAIN"</span><span class="p">,</span>
                <span class="k">new</span> <span class="n">Terrain</span><span class="p">,</span>
                <span class="s">"thumbnails/terrain.jpg"</span><span class="p">,</span>
                <span class="k">new</span> <span class="n">ofImage</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">"CONSTELLATION"</span><span class="p">,</span>
                <span class="k">new</span> <span class="n">Constellation</span><span class="p">,</span>
                <span class="s">"thumbnails/constellation.jpg"</span><span class="p">,</span>
                <span class="k">new</span> <span class="n">ofImage</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s">"ELLIPSE"</span><span class="p">,</span>
              <span class="k">new</span> <span class="n">ofxDarkKnightEllipse</span><span class="p">,</span>
              <span class="s">"thumbnails/ellipse.jpg"</span><span class="p">,</span>
              <span class="k">new</span> <span class="n">ofImage</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="n">init</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
<p>Collections are specials modules that holds up to 16 drawer modules with the hability to change between each other in real time. Look at the <code>ofxDarkKnight/libs/collections/basic.hpp</code>to see an example of a basic collection.</p>

<p>To create a new collection you will need to follow next steps: </p>

<ol>
<li><p>create a new class that inheriths from the <code>MediaPool</code> class.</p></li>
<li><p>In the setup function set the collection name with the <code>setCollectionName(string)</code> function.</p></li>
<li><p>Add a thumbnail image for the module.</p></li>
<li><p>Provide a set of collectionItems that includes: name, module instance, thumbnail path, ofImage instance.</p></li>
<li><p>Call the <code>init()</code> function.</p></li>
</ol>
<h2 id='adding-ellipse-example-to-the-collection'>Adding Ellipse example to the collection</h2>
<blockquote>
<p>Modified version of Ellipse module header</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "module.hpp"
</span>
<span class="k">class</span> <span class="nc">ofxDarkKnightEllipse</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Module</span>
<span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">setup</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">draw</span><span class="p">();</span>
    <span class="kt">void</span> <span class="n">addModuleParameters</span><span class="p">();</span>

    <span class="k">private</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">radius</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fillColorR</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fillColorG</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">fillColorB</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Modified version of Ellipse module</p>
</blockquote>
<pre class="highlight cpp"><code><span class="cp">#include "ofxDarkKnightEllipse.hpp"
</span>
<span class="kt">void</span> <span class="n">ofxDarkKnightEllipse</span><span class="o">::</span><span class="n">setup</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">//initialize all your parameters
</span>  <span class="n">radius</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
  <span class="n">fillColorR</span> <span class="o">=</span> <span class="mi">255</span><span class="p">;</span>
  <span class="n">fillColorG</span> <span class="o">=</span> <span class="n">fillColorB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofxDarkKnightEllipse</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">ofFill</span><span class="p">();</span>
  <span class="n">ofSetColor</span><span class="p">(</span><span class="n">fillColorR</span><span class="p">,</span><span class="n">fillColorG</span><span class="p">,</span> <span class="n">fillColorB</span><span class="p">);</span>
  <span class="n">ofDrawEllipse</span><span class="p">(</span><span class="n">ofGetWidth</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">ofGetHeight</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">raduis</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">ofxDarkKnightEllipse</span><span class="o">::</span><span class="n">addModuleParameters</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"radius"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">radius</span><span class="p">);</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"R"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">fillColorR</span><span class="p">);</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"G"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">fillColorG</span><span class="p">);</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">addSlider</span><span class="p">(</span><span class="s">"B"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">bind</span><span class="p">(</span><span class="n">fillColorB</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>Since we&#39;re not using the Ellipse module as a stand alone module we can skip some tasks from the previus module definition:</p>

<ol>
<li><p>You don&#39;t need to declare and allocate the fbo, the media pool does it for you in an efficient way that only 1 fbo will be needed to draw any of the 16 drawer modules.</p></li>
<li><p>You don&#39;t need the <code>drawMainOutput()</code> function because we will not return nothing from the drawers, only the collection will have a single output and the <code>MediaPool</code> class will handle it for you.</p></li>
<li><p>Since we&#39;re not returning anything you should skip the <code>ofFbo * getFbo()</code> function from your module.</p></li>
</ol>

<p>Do this modifications before runing your project that includes the Ellipse module in the basic collection.</p>
<h1 id='credits'>Credits</h1>
<p><a href="https://github.com/luiscript">Luis Fernando García</a> is the author of ofxDarkKnight.</p>

<p>ofxDatGui was created by <a href="https://github.com/braitsch">Stephen Braitsch</a></p>
<h1 id='license'>License</h1>
<p><strong>Copyright</strong> (C) 2018 <a href="http://luiscript.com">Luis Fernando García</a></p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the &quot;Software&quot;), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
 copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="c++">c++</a>
          </div>
      </div>
    </div>
  </body>
</html>
